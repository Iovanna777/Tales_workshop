# Tales_workshop
–ü—Ä–æ–µ–∫—Ç ¬´–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è —Å–∫–∞–∑–æ–∫¬ª ‚Äî AI-–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–µ—Ç—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

# ü™Ñ Storycraft Workshop

An AI-powered Telegram bot that crafts personalized children's stories with unique illustrations on the fly. This project leverages a multi-agent n8n workflow to automate the entire creative process, from understanding a parent's request to delivering a finished, illustrated story.

## Core Features

*   **On-Demand Story Generation:** Creates unique children's stories based on user-provided details like the child's name, age, interests, and a specific theme or problem to address.
*   **AI-Generated Cover Art:** Each story is accompanied by a custom illustration generated by Stable Diffusion, visually capturing the essence of the tale.
*   **Persistent Story Library:** Every generated story is automatically saved to a Supabase database, creating a personal library for each user.
*   **Keyword Search:** Allows users to easily find and retrieve any previously created story by simply searching for a keyword (e.g., "the story about the brave fox").

## How It Works: The Workflow Explained

The entire logic is orchestrated within a single **n8n** workflow that seamlessly connects multiple services.

1.  **User Interaction via Telegram:** The workflow begins when a user sends a message to the Telegram bot. A **Telegram Trigger** node captures this initial interaction.
2.  **Intent Recognition:** A code node, powered by a language model, analyzes the user's message to determine the intent:
    *   **Create a new story:** If the user provides details for a new tale.
    *   **Search for an existing story:** If the user asks to find a previous story.
3.  **Story Creation Path:**
    *   The user's structured input is sent to the **OpenAI API (GPT-4o)**, which acts as the "storyteller" and writes a unique, personalized narrative.
    *   Simultaneously, the generated story text is sent to the **Perplexity API** to create a concise, descriptive prompt for an image.
    *   This image prompt is then relayed to the **Hugging Face API**, which uses **Stable Diffusion** to generate the cover illustration.
    *   The final story text and the URL of the generated image are saved as a new entry in the **Supabase** database.
    *   The bot sends a final message in Telegram containing the illustrated story.
4.  **Story Search Path:**
    *   The workflow queries the **Supabase** database using the extracted keyword from the user's message.
    *   If a match is found, the corresponding story text and image are retrieved and sent to the user in Telegram.

## Technology Stack

*   **Orchestration:** n8n
*   **User Interface:** Telegram Bot API
*   **Text Generation:** OpenAI API (GPT-4o)
*   **Image Prompt Generation:** Perplexity API
*   **Image Generation:** Hugging Face API (Stable Diffusion)
*   **Database & Storage:** Supabase

## Getting Started: A Pure Instruction

To run this project, you will need a self-hosted or cloud instance of n8n and the necessary API keys for the integrated services.

1.  **Clone the Repository**
    Clone this project to your local machine to get the `workflow.json` file.
    ```bash
    git clone https://github.com/your-username/storycraft-workshop.git
    ```
2.  **Import the Workflow**
    In your n8n instance, import the `workflow.json` file to create a copy of the entire workflow.

3.  **Configure Credentials**
    The workflow requires API credentials to function. In n8n, navigate to the "Credentials" section and add new credentials for each of the following services:
    *   **Telegram API:** Your bot token obtained from BotFather.
    *   **OpenAI API:** Your secret key from your OpenAI account.
    *   **Hugging Face API:** An API token from your Hugging Face account settings.
    *   **Perplexity API:** Your API key from Perplexity's developer platform.
    *   **Supabase API:** Your project URL and `anon` key from your Supabase project settings.

4.  **Link Credentials to Nodes**
    Open the imported workflow in the n8n editor. For each node that requires authentication (e.g., the OpenAI node, Supabase node), select the credential you just created from the dropdown menu.

5.  **Activate the Workflow**
    Save and activate the workflow. Your Storycraft Workshop bot is now live and ready to create magic in Telegram.
